

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Conditionals &mdash; Dagor Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css?v=6ad1a40c" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css?v=93b9aae3" />

  
    <link rel="shortcut icon" href="../../../../_static/gaijin.ico"/>
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../_static/js/hoverxref.js"></script>
      <script src="../../../../_static/js/tooltipster.bundle.min.js"></script>
      <script src="../../../../_static/js/micromodal.min.js"></script>
      <script src="../../../../_static/js/versionwarning.js?v=d4224a34"></script>
      <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../../_static/design-tabs.js?v=36754332"></script>
      <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Data types and variables" href="data-types.html" />
    <link rel="prev" title="Basic Concepts" href="../basic-concepts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Dagor Documentation
              <img src="../../../../_static/gaijin_round_blur.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../dagor-home/index.html">Dagor Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting-started/index.html">Getting Started with Dagor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../assets/index.html">Assets and Assets Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dagor-tools/index.html">Dagor Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../projects/index.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples/index.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials/index.html">Tutorials and Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API References and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../dagor-render/index.html">Dagor Engine Render</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quirrel-modules/index.html">Quirrel Modules Docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dagor-engine-docs/index.html">Engine Libraries Docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dagor-ecs/index.html">Dagor ECS</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Dagor Shading Language (DSHL) docs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../basic-concepts.html">Basic Concepts</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Conditionals</a></li>
<li class="toctree-l4"><a class="reference internal" href="data-types.html">Data types and variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="error.html">Throwing compilation errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="hardware.html">Hardware defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="includes.html">Includes</a></li>
<li class="toctree-l4"><a class="reference internal" href="intervals.html">Intervals</a></li>
<li class="toctree-l4"><a class="reference internal" href="macros.html">Macros</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../channels.html">Channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shaders.html">Shaders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../materials.html">Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../directives.html">Common directives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intrinsics.html">Intrinsics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../global-constants.html">Global constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pipeline-states.html">Pipeline state configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../keywords.html">Keywords</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../danetgame-framework/index.html">DaNetGame Framework</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Dagor Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">API References and Documentation</a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Dagor Shading Language (DSHL) docs</a></li>
          <li class="breadcrumb-item"><a href="../basic-concepts.html">Basic Concepts</a></li>
      <li class="breadcrumb-item active">Conditionals</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/api-references/dagor-dshl/index/basic-concepts/conditionals.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="conditionals">
<span id="id1"></span><h1>Conditionals<a class="headerlink" href="#conditionals" title="Link to this heading"></a></h1>
<p><strong>Outside HLSL blocks</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">else</span></code>, <code class="docutils literal notranslate"><span class="pre">else</span> <span class="pre">if</span></code> directives are used to perform conditional compilation of different shader variants in DSHL.</p>
<p>Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">texture</span><span class="w"> </span><span class="n">tex</span><span class="p">;</span>
<span class="n">texture</span><span class="w"> </span><span class="n">fallback</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">test_interval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">interval</span><span class="w"> </span><span class="n">test_interval</span><span class="o">:</span><span class="n">negative</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">less_than_two</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">more_than_two</span><span class="p">;</span>

<span class="n">shader</span><span class="w"> </span><span class="n">test_shader</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tex</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="n">ps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">tex</span><span class="err">@</span><span class="n">smp2d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tex</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="n">ps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">tex</span><span class="err">@</span><span class="n">smp2d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fallback</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">test_interval</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">positive</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="n">vs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">var</span><span class="err">@</span><span class="n">f4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">test_interval</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">less_than_two</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="n">vs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">var</span><span class="err">@</span><span class="n">f4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="n">vs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">var</span><span class="err">@</span><span class="n">f4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For each branch of the conditional statement, there will be created some number of shader variants (determined by combinatorics).
If branch is an exact duplicate of another, no variants will be created.
These variants are to be switched in runtime, based on the values in the conditionals.</p>
<p><strong>Inside HLSL blocks</strong></p>
<p>It is possible to use similar directives <code class="docutils literal notranslate"><span class="pre">##if,</span> <span class="pre">##elif,</span> <span class="pre">##else,</span> <span class="pre">##endif</span></code> inside <code class="docutils literal notranslate"><span class="pre">hlsl{...}</span></code> blocks too with a special <code class="docutils literal notranslate"><span class="pre">##</span></code> preprocessor tag.
In this case, however, you need to close them with <code class="docutils literal notranslate"><span class="pre">##endif</span></code> in the end. Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">hlsl</span>
<span class="p">{</span>
<span class="cp">##if tex != NULL</span>
<span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="n">somefloat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<span class="cp">##endif</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>maybe intrinsic</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">maybe()</span></code> intrinsic can be used in a bool-expression.
Its argument is any identifier. If this identifier is not a boolean variable, the intrinsic will return false, otherwise the value of this boolean variable.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wsao_tex</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shader</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ssao</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">use_wsao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">(</span><span class="n">ps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">maybe</span><span class="p">(</span><span class="n">use_wsao</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">foo</span><span class="err">@</span><span class="n">f4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">hlsl</span><span class="p">(</span><span class="n">ps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cp">##if maybe(use_wsao)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
<span class="w">  </span><span class="cp">##endif</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you try to remove the <code class="docutils literal notranslate"><span class="pre">maybe()</span></code> in this example, it will cause a compilation error, because the <code class="docutils literal notranslate"><span class="pre">use_wsao</span></code> is not declared in all variants.</p>
<p><strong>Creating multiple shaders with conditionals</strong></p>
<p>Conditionals can also be used to define multiple shaders at once (for convenience).
You just declare multiple shaders with the <code class="docutils literal notranslate"><span class="pre">shader</span></code> keyword and do a conditional statement on the shader’s name:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">shader</span><span class="w"> </span><span class="n">one</span><span class="p">,</span><span class="w"> </span><span class="n">two</span><span class="p">,</span><span class="w"> </span><span class="n">three</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shader</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">one</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shader</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">two</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This example will result in compilation of 3 different shaders, namely <code class="docutils literal notranslate"><span class="pre">one</span></code>, <code class="docutils literal notranslate"><span class="pre">two</span></code> and <code class="docutils literal notranslate"><span class="pre">three</span></code>,
which will have different values assigned to <code class="docutils literal notranslate"><span class="pre">var</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not confuse this feature with intervals <a class="reference internal" href="intervals.html#intervals"><span class="std std-ref">Intervals</span></a>.
It does not create variants of a single shader, but creates different shaders with different names.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../basic-concepts.html" class="btn btn-neutral float-left" title="Basic Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="data-types.html" class="btn btn-neutral float-right" title="Data types and variables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Gaijin Entertainment 2025.
      <span class="lastupdated">Last updated on Jan 23, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>