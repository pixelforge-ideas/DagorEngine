# Dagor 2 Damages Setup Tool

## Installation

[Install the script](installation.md) following the provided instructions.

```{important}
This script requires 3ds Max 2013 or newer version to run.
```

## Accessing the Damage Setup Tool

1. Navigate to **Gaijin Tools** {bdg-dark-line}`1` **> Damage Objects Setup...**
   {bdg-dark-line}`2`. This will open the main window of the Dagor 2 Damages
   Setup {bdg-dark-line}`3`.

2. To verify the version of the script, go to **Gaijin Tools**
   {bdg-dark-line}`1` **> About** {bdg-dark-line}`4`. The **About** window will
   display the current version. It's important to check this regularly to ensure
   your script is up to date.

   <img src="_images/damages_setup_01.png" alt="Damage Setup Tool" align="center" width="60em">

```{note}
Make sure that the plugin version is at least `1.4`.
```

## Configuring the Damage Setup Tool

Download the following test scene:
{download}`dmg_example.max <https://drive.google.com/file/d/1B2ppFE_EY5JKeHJ10WesAY_6Ot78miXH/view?usp=drive_link>`
and open the downloaded project in 3ds Max.

```{note}
The minimum supported version for this file is 3ds Max 2018.
```

Open the utility window:

<img src="_images/damages_setup_02.png" alt="Damage Setup Tool" align="center">

**Parameters:**

- **Visible Object Parameters** {bdg-dark-line}`1`: defines parameters for
  object chunks that will be visually displayed in the game. Default settings
  are optimized for most cases but can be customized as needed.

- **Collision Object Parameters** {bdg-dark-line}`2`: sets parameters for the
  collisions generated by the tool. These are pre-configured for common use
  cases, but you can modify them to fit specific requirements.

- **Collision Rotation** {bdg-dark-line}`3`: adjusts the rotation limits for
  generated collisions to create more natural-looking destruction effects.

- **Max Points in Collision** {bdg-dark-line}`4`: specifies the maximum number
   of points in a generated collision. This option is only active if a convex
   hull is selected as the collision type.

- **Collision Surface Displacement** {bdg-dark-line}`5`: defines the
  displacement of the collision surface relative to the object surface. This
  setting is also only active when using a convex hull collision type.

- **Collision Name Postfix**{bdg-dark-line}`6`: adds a postfix to the names of
  generated collisions to easily distinguish them from other objects.

- **Collision Type** {bdg-dark-line}`7`: selects the type of collision to
  generate. The default is a box, but other options include sphere, capsule, and
  convex hull.

- **Overwrite Existing Parameters** {bdg-dark-line}`8`: determines whether the
  existing parameters in "Visible Object Parameters" and "Collision Object
  Parameters" will be overwritten. If unchecked, all existing parameters will be
  removed and replaced with the new ones.

- **Generate Collisions** {bdg-dark-line}`9`: after selecting the objects for
  which you want to generate collisions, click this button to start the process.

- **Documentation** {bdg-dark-line}`10`: links to this documentation.

- **Contact Author** {bdg-dark-line}`11`: provides contact information for the
  developer if assistance is needed.

- **Progress Bar** {bdg-dark-line}`12`: displays the progress of the scene
  processing. For scenes with many objects (50-100), this may take several
  minutes.

## Generating Collisions

1. Select the objects you want to generate collisions for {bdg-dark-line}`A`.
2. Prepare them for export to the engine.
3. Click the **Generate** button {bdg-dark-line}`B`.

   <img src="_images/damages_setup_03.png" alt="Damage Setup Tool" align="center" width="60em">

## Reviewing Generated Collisions

After processing, a list of new objects {bdg-dark-line}`C` and generated
collisions {bdg-dark-line}`D` will appear.

<img src="_images/damages_setup_04.png" alt="Damage Setup Tool" align="center" width="60em">


